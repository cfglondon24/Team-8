<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Page Image</title>
    <link rel="stylesheet" href="main.css">

</style>
</head>
<body>
    <div class="menu-bar">
        <div class="menu-left">
            <div class="logo"> <!-- Logo box -->
                <img src="logo-words.jpeg" alt="Logo" height="40px"> 
            </div>
        </div>
        <div class="menu-right">
            <a href="/home">Home</a>
            <a href="#">About</a>
            <a href="#">Professsional Resources</a>
            <a href="#">Forum</a>
            <a href="/login">Login</a>
        </div>
    </div>

    
    
    <form id="moodForm" action="/submit_mood" method="POST">
        <div class="mood-form">
            <h2>How are you feeling today?</h2>
            <div id="emotionalScore" class="score-options">
                <span>Select your emotional mood:</span>
                <button type="button" class="mood-btn" data-mood="Very Unpleasant" onclick="selectMood('emotional', 'Very Unpleasant')">Very Unpleasant</button>
                <button type="button" class="mood-btn" data-mood="Unpleasant" onclick="selectMood('emotional', 'Unpleasant')">Unpleasant</button>
                <button type="button" class="mood-btn" data-mood="Neutral" onclick="selectMood('emotional', 'Neutral')">Neutral</button>
                <button type="button" class="mood-btn" data-mood="Pleasant" onclick="selectMood('emotional', 'Pleasant')">Pleasant</button>
                <button type="button" class="mood-btn" data-mood="Very Pleasant" onclick="selectMood('emotional', 'Very Pleasant')">Very Pleasant</button>
            </div>
            <div id="cognitiveScore" class="score-options" style="display:none;">
                <span>Select your cognitive mood:</span>
                <button type="button" class="mood-btn" data-mood="Very Unpleasant" onclick="selectMood('cognitive', 'Very Unpleasant')">Very Unpleasant</button>
                <button type="button" class="mood-btn" data-mood="Unpleasant" onclick="selectMood('cognitive', 'Unpleasant')">Unpleasant</button>
                <button type="button" class="mood-btn" data-mood="Neutral" onclick="selectMood('cognitive', 'Neutral')">Neutral</button>
                <button type="button" class="mood-btn" data-mood="Pleasant" onclick="selectMood('cognitive', 'Pleasant')">Pleasant</button>
                <button type="button" class="mood-btn" data-mood="Very Pleasant" onclick="selectMood('cognitive', 'Very Pleasant')">Very Pleasant</button>
            </div>
            <div id="physicalScore" class="score-options" style="display:none;">
                <span>Select your physical mood:</span>
                <button type="button" class="mood-btn" data-mood="Very Unpleasant" onclick="selectMood('physical', 'Very Unpleasant')">Very Unpleasant</button>
                <button type="button" class="mood-btn" data-mood="Unpleasant" onclick="selectMood('physical', 'Unpleasant')">Unpleasant</button>
                <button type="button" class="mood-btn" data-mood="Neutral" onclick="selectMood('physical', 'Neutral')">Neutral</button>
                <button type="button" class="mood-btn" data-mood="Pleasant" onclick="selectMood('physical', 'Pleasant')">Pleasant</button>
                <button type="button" class="mood-btn" data-mood="Very Pleasant" onclick="selectMood('physical', 'Very Pleasant')">Very Pleasant</button>
            </div>
            <input type="hidden" id="emotionalScoreInput" name="emotionalScore">
            <input type="hidden" id="cognitiveScoreInput" name="cognitiveScore">
            <input type="hidden" id="physicalScoreInput" name="physicalScore">
            <textarea id="moodMessage" class="input-field" name="moodMessage" placeholder="Share your thoughts..." style="display:none;"></textarea>
            <button type="submit" class="submit-btn" style="display:none;">Submit</button>
        </div>
    </form>
    
    


    <button class="open-button" onclick="openChat()">Open Chat</button>
    
    
    <div id="chatPopup" class="chat-popup">
        <div class="form-container">
            <div id="chatMessages" class="chat-messages"></div>
            <textarea id="messageInput" placeholder="Type your message..."></textarea>
            <button class="btn" onclick="sendMessage()">Send</button>
            <button class="btn cancel" onclick="closeChat()">Close</button>
        </div>
    </div>


    <script>
        function openChat() {
            document.getElementById("chatPopup").style.display = "block";
        }

        function closeChat() {
            document.getElementById("chatPopup").style.display = "none";
        }

        function sendMessage() {
            var message = document.getElementById("messageInput").value;
            if (message.trim() !== "") {
                displayMessage(message, "user");
                // Simulate a response from the chat bot
                setTimeout(function() {
                    displayMessage(analyzeMessage(message), "bot");
                }, 1000);
                document.getElementById("messageInput").value = "";
            }
        }

        function submitMood() {
            var moodScore = document.getElementById("moodScore").value;
            var moodMessage = document.getElementById("moodMessage").value;
            if (moodScore.trim() !== "" && moodMessage.trim() !== "") {

                console.log("Mood Score: " + moodScore + ", Message: " + moodMessage);

                document.getElementById("moodScore").value = "";
                document.getElementById("moodMessage").value = "";
                alert("Thank you for sharing how you feel.");
            } else {
                alert("Please fill in both fields.");
            }
        }
        

    function selectMood(category, mood) {
        const scoreMap = { 'Very Unpleasant': 1, 'Unpleasant': 2, 'Neutral': 3, 'Pleasant': 4, 'Very Pleasant': 5 };
        document.getElementById(`${category}ScoreInput`).value = scoreMap[mood];

        if (category === 'emotional') {
            document.getElementById('emotionalScore').style.display = 'none';
            document.getElementById('cognitiveScore').style.display = 'block';
        } else if (category === 'cognitive') {
            document.getElementById('cognitiveScore').style.display = 'none';
            document.getElementById('physicalScore').style.display = 'block';
        } else if (category === 'physical') {
            document.getElementById('physicalScore').style.display = 'none';
            document.getElementById('moodMessage').style.display = 'block';
            document.querySelector('.submit-btn').style.display = 'block';
        }
    }




        function analyzeMessage(message) {
            // We want to go through the message and look for certain keywords and recommend either pages or phone numbers based on this response
            var distressList = ["urgently", "scared", "depressed"];
            var aboutList = ["learn", "educate", "about"];
            var legalList = ["legal", "work", "office", "boss"]
            var aboutPageURL = "about.html"; 

            for (var i = 0; i < distressList.length; i++) {
                if (message.includes(distressList[i])) {
                    return "We feel like you will be better suited to speak to someone on the phone. Please call 0800 389 6255."
                }
            }

            for (var i = 0; i < aboutList.length; i++) {
                if (message.includes(aboutList[i])) {
                    var messageWithLink = "You seem to want to learn more about our charity, please visit our about page to learn more";
                    return messageWithLink;
                }
            }

            for (var i = 0; i < legalList.length; i++) {
                if (message.includes(legalList[i])) {
                    return "We feel like you will be better suited to speak to someone on the phone. Please contact anyone of our legal partners: Anthony Collins (0121 212 7476), Enable Law (0800 044 8488), irwinmitchell (08000 23 22 33), fletchers group (01704 503126)"
                }
            }

            return "This is a generic response from our chat bot for further support please contact us on: 08003896255";
        }


        function displayMessage(message, sender) {
            var chatMessages = document.getElementById("chatMessages");
            var messageElement = document.createElement("div");
            messageElement.classList.add("message");
            messageElement.classList.add(sender);
            messageElement.innerText = message;
            chatMessages.appendChild(messageElement);
        }
    </script>

    
</body>
</html>
